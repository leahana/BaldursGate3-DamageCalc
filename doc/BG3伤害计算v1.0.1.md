### 1. 功能概述

​	本脚本旨在为角色扮演游戏中的攻击行为提供期望伤害计算。

### 2. 核心功能

#### 2.1 基本伤害计算

- **输入提示**：`请输入攻击使用的骰子类型和数量（例如：2D6）:`
- **期望格式**：用户应输入一个或多个骰子的数量和面数，格式为`[数量]D[面数]`，例如`2D6`表示两个六面骰。
- **处理说明**：脚本将解析用户输入，提取骰子数量和面数，并计算出这些骰子的平均伤害值。

#### 2.2 暴击机制

- **输入提示**：

  - `请输入暴击判定的骰子面数（如20表示20时为暴击）:`
  - `请输入暴击时的额外骰子（例如：1D12）:`

- **期望格式**：

  - 暴击判定：用户输入一个数字，表示何值时触发暴击。
  - 额外骰子：与基本伤害计算类似，格式为`[数量]D[面数]`。暴击时伤害骰子数量翻倍。

- **处理说明**：脚本将计算在暴击时的额外伤害，并结合基本伤害以计算总的期望伤害。

  

#### 2.3. 加成伤害

- **输入提示**：`请输入任何固定的伤害加成值（例如：+3）:`

- **期望格式**：用户输入一个整数，可以是正数或负数。

- **处理说明**：这个加成值将被直接加到每次攻击的期望伤害上。

  



### 3. 函数设计

#### 3.1.结构设计

- 单文件多函数

#### 3.2.功能函数

- 循环函数：模拟服务器运行，用户输入特殊指令退出，否则While True死循环结构
  - 期望伤害
  - 重新计算
  - 退出
- 输入函数：接收用户输入指令，正则表达式匹配输入信息是否符合规定
- 伤害计算函数：
  - 字符串处理函数：将输入结果拆分为骰子伤害和固定伤害
  - 期望伤害计算函数：根据骰子面板 （骰子最小值+骰子最大值）/2计算面板期望伤害
  - 异常处理函数：统一显示输入错误

#### 3.3.通用组件函数



### 4. 用户界面设计

- **交互式命令行界面**：脚本将通过命令行交互，要求用户按步骤输入必要的信息。

- **输入验证**：脚本将验证输入的有效性，如确保骰子格式正确，加值和AC为有效数字。

- **结果输出**：显示每种情况下的期望伤害结果。

  

### 5. 技术考虑
- **编程语言**：Python，因其简单易用且适合快速开发。

- **数据处理**：使用基本的数学计算来实现所有伤害和概率的计算。

- **依赖性**：无外部依赖，确保脚本的可移植性和易于部署。

- **打包**：使用PyInstaller打包成独立的可执行文件，以便在没有Python环境的电脑上运行。

  

### 6. 发展和扩展
将来，此脚本可以扩展以包括更多复杂的游戏机制，如抗性、易伤、特殊效果触发几率等。



### 7. 文档和支持
- **用户手册**：提供详细的用户手册，介绍如何使用脚本。
- **开发文档**：记录开发过程，包括代码结构和主要函数的说明。

通过上述设计文档，你可以开始着手编写脚本，并确保最终产品能够满足所有预定的需求和功能。如果需要，我可以帮助你进一步细化这些功能或直接编写代码。





>2024-05-06更新 增加函数设计